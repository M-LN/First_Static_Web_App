<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <title>Performance Analytics Dashboard</title>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="logo">
        <i class="fas fa-chart-line"></i>
        <span>PerformanceHub</span>
      </div>
      <nav>
        <ul>
          <li><a href="index.html" class="active"><i class="fas fa-home"></i> Home</a></li>
          <li><a href="about.html"><i class="fas fa-info-circle"></i> About</a></li>
          <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Business Performance Analytics</h1>
        <p>Generate comprehensive reports with interactive charts and actionable insights.</p>
        <a href="#report-section" class="btn btn-primary">Generate Report</a>
      </div>
      <div class="hero-image">
        <img src="https://cdn.pixabay.com/photo/2018/03/27/21/43/startup-3267505_1280.jpg" alt="Analytics Dashboard">
      </div>
    </div>
  </section>

  <section class="features">
    <div class="container">
      <h2 class="section-title">Key Features</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-chart-bar"></i></div>
          <h3>Interactive Charts</h3>
          <p>Visualize your data with beautiful interactive charts powered by Chart.js</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-table"></i></div>
          <h3>Detailed Tables</h3>
          <p>View comprehensive data tables with performance metrics and KPIs</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-lightbulb"></i></div>
          <h3>Actionable Insights</h3>
          <p>Get recommendations and insights based on your performance data</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon"><i class="fas fa-file-export"></i></div>
          <h3>Exportable Reports</h3>
          <p>Download and share your reports in HTML format</p>
        </div>
      </div>
    </div>
  </section>

  <section id="report-section" class="report-generator">
    <div class="container">
      <h2 class="section-title">Performance Report Generator</h2>
      <div class="report-card">
        <div class="report-options">
          <h3><i class="fas fa-cog"></i> Report Options</h3>
          <p>Generate a comprehensive performance report with a single click. The report includes:</p>
          <ul>
            <li><i class="fas fa-check"></i> Performance metrics for the last 5 months</li>
            <li><i class="fas fa-check"></i> Revenue, expense, and profit analysis</li>
            <li><i class="fas fa-check"></i> Interactive progression charts</li>
            <li><i class="fas fa-check"></i> Detailed tables with monthly breakdown</li>
            <li><i class="fas fa-check"></i> Strategic recommendations</li>
          </ul>
        </div>
        <div class="report-actions">
          <button id="generateReportBtn" class="btn btn-primary">
            <i class="fas fa-file-alt"></i> Generate Report
          </button>
          <div id="loadingIndicator">
            <i class="fas fa-spinner fa-spin"></i> Generating report, please wait...
          </div>
          <div class="report-preview" id="reportPreviewSection">
            <h4>Report Preview</h4>
            <div id="reportPreview" class="preview-container"></div>
            <button id="downloadBtn" class="btn btn-secondary">
              <i class="fas fa-download"></i> Download Full Report
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="testimonials">
    <div class="container">
      <h2 class="section-title">What Our Users Say</h2>
      <div class="testimonial-grid">
        <div class="testimonial-card">
          <div class="testimonial-avatar">
            <img src="https://randomuser.me/api/portraits/women/43.jpg" alt="Jane">
          </div>
          <div class="testimonial-content">
            <p>"This tool has transformed how we analyze our business performance. The reports are both comprehensive and easy to understand."</p>
            <div class="testimonial-author">Jane D., Marketing Director</div>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="testimonial-avatar">
            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Robert">
          </div>
          <div class="testimonial-content">
            <p>"The interactive charts and actionable insights have helped us make strategic decisions that increased our profit by 28%."</p>
            <div class="testimonial-author">Robert M., CEO</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-about">
          <h3><i class="fas fa-chart-line"></i> PerformanceHub</h3>
          <p>Helping businesses make data-driven decisions with powerful analytics and reporting tools.</p>
        </div>
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="footer-contact">
          <h3>Contact Us</h3>
          <p><i class="fas fa-envelope"></i> info@performancehub.example</p>
          <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
          <div class="social-links">
            <a href="#" aria-label="Twitter" title="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="LinkedIn" title="Connect with us on LinkedIn"><i class="fab fa-linkedin"></i></a>
            <a href="#" aria-label="GitHub" title="View our projects on GitHub"><i class="fab fa-github"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 PerformanceHub. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Initialize hidden elements
    document.addEventListener('DOMContentLoaded', function() {
      const reportPreviewSection = document.getElementById('reportPreviewSection');
      reportPreviewSection.style.display = 'none';
    });
    
    // Report generation functionality
    document.getElementById('generateReportBtn').addEventListener('click', async function() {
      const loadingIndicator = document.getElementById('loadingIndicator');
      const generateBtn = document.getElementById('generateReportBtn');
      const reportPreviewSection = document.getElementById('reportPreviewSection');
      const reportPreview = document.getElementById('reportPreview');
      let htmlContent = '';
      
      // Show loading state
      loadingIndicator.style.display = 'block';
      generateBtn.disabled = true;
      reportPreviewSection.style.display = 'none';
      
      try {
        // Call the Azure Function API
        const response = await fetch('/api/GenerateReport');
        
        if (!response.ok) {
          throw new Error(`Failed to generate report: ${response.statusText}`);
        }
        
        // Get the HTML content
        htmlContent = await response.text();
        
        // Show preview with iframe
        reportPreview.innerHTML = `<iframe srcdoc="${htmlContent.replace(/"/g, '&quot;')}" 
                                        style="width:100%; height:300px; border:1px solid #ddd;"></iframe>`;
        
        // Show preview section
        reportPreviewSection.style.display = 'block';
        
      } catch (error) {
        console.error('Error generating report:', error);
        alert('Failed to generate report: ' + error.message);
      } finally {
        // Reset UI state
        loadingIndicator.style.display = 'none';
        generateBtn.disabled = false;
      }
      
      // Set up download button
      document.getElementById('downloadBtn').onclick = function() {
        if (htmlContent) {
          // Create a Blob with the HTML content
          const blob = new Blob([htmlContent], { type: 'text/html' });
          
          // Create a download link
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `performance-report-${new Date().toISOString().slice(0, 10)}.html`;
          
          // Trigger download
          document.body.appendChild(a);
          a.click();
          
          // Clean up
          setTimeout(() => {
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          }, 100);
        }
      };
    });
  </script>
</body>
</html>